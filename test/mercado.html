<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Document</title>
    <style>
        img{
            width: 150px !important;
            height: 150px;
        }
    </style>
</head>

<body>
    <textarea class="form-control" id="search"></textarea>
    <div id="rta"></div>
</body>

<script>
    $(document).ready(() => {
        $("#search").keyup(function(){
            $.ajax({
                url: "https://api.mercadolibre.com/sites/MLA/search",
                type: "GET",
                data: {
                    'q': $("#search").val().replace(" ", "-")
                },
                success: function (response) {
                    let plantilla = `
                        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
                            <div class="carousel-indicators">
                                <button type="button" data-bs-target="#carouselExampleIndicators" class="active" data-bs-slide-to="0" style="background:black;"></button>
                    `;
                    for (let n = 1; n < (Math.abs((response.results.length-3) / 3)+1); n++) {
                        plantilla += `
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="${n}" style="background:black;"></button>
                        `;
                    }
                    plantilla += `
                        </div>
                        <div class="carousel-inner">
                                <div class="carousel-item active">
                    `;
                    let i = 0;
                    response.results.forEach(rta => {
                        if(i != 0 && i % 3 == 0){
                            plantilla += `
                                </div>
                                <div class="carousel-item">
                            `;
                        }
                        plantilla += `
                            <div class="row" style="border:solid 1px black;">
                                <img src="${rta.thumbnail}" alt="${rta.title}">
                                <a href="${rta.permalink}" target="_blank"><h1>${rta.title}</h1></a>
                                <h3>$${rta.price} ${rta.currency_id}</h3>
                            </div>
                        `
                        i++;
                    });
                    plantilla += `
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                        </div>    
                    `;
                    $("#rta").html(plantilla);
                }
            });
        })
    });
</script>

</html>